@for (menu of menuService.pagesMenu; track $index) {
<div>
    @if (menuService.showSideBar) {
    <div class="mx-1 flex items-center justify-between py-3">
        <small [ngClass]="{ hidden: !menuService.showSideBar }" 
               class="text-muted-foreground/50 text-xs font-semibold transition-all duration-300 ease-out">
            {{ menu.group }}
        </small>
    </div>
    }
    <ul class="flex flex-col">
        <!-- List items -->
        @for (item of menu.items; track $index) {
        <li>
            <!-- Menu List -->
            <div (click)="toggleMenu(item)" 
                 [ngClass]="{
                'hover:bg-primary/10': !menuService.showSideBar && item.active,
                'hover:bg-card/50': !menuService.showSideBar
                }" 
                class="text-muted-foreground hover:text-foreground group relative flex grow items-center gap-4 rounded-lg px-2 transition-all duration-300 ease-out">
                
                <!-- Icon -->
                <div [ngClass]="item.active && !menuService.showSideBar ? 'text-primary' : 'text-muted-foreground/50'"
                     class="transition-all duration-300 ease-out">
                    <svg-icon src="{{ item.icon }}" [svgClass]="'h-5 w-5'"></svg-icon>
                </div>

                <!-- Condition -->
                <ng-container [ngTemplateOutlet]="item.children ? childMenu : parentMenu"
                    [ngTemplateOutletContext]="{ item: item }">
                </ng-container>

                <!-- Workaround:: Enable routerLink -->
                <ng-template #parentMenu let-item="item">
                    <div routerLink="{{ item.route }}"
                        class="text-muted-foreground hover:text-primary flex h-[36px] cursor-pointer items-center justify-start rounded-sm transition-all duration-300 ease-out">
                        <a [ngClass]="{ hidden: !menuService.showSideBar }" routerLinkActive="text-primary"
                            class="truncate text-xs font-semibold tracking-wide focus:outline-hidden transition-all duration-300 ease-out">
                            {{ item.label }}
                        </a>
                    </div>
                </ng-template>

                <!-- Workaround:: Disable routerLink -->
                <ng-template #childMenu let-item="item">
                    <div class="flex h-9 grow cursor-pointer items-center justify-start rounded-sm transition-all duration-300 ease-out">
                        <a [ngClass]="{ hidden: !menuService.showSideBar }"
                            class="text-muted-foreground group-hover:text-primary truncate text-xs font-semibold tracking-wide focus:outline-hidden transition-all duration-300 ease-out">
                            {{ item.label }}
                        </a>
                    </div>
                </ng-template>

                <!-- Arrow Icon -->
                @if (item.children) {
                <button [ngClass]="{ hidden: !menuService.showSideBar }"
                    class="text-foreground/50 flex cursor-pointer items-center justify-end p-0 transition-all duration-500 ease-out ltr:right-0 rtl:left-0">
                    <div 
                         class="transition-all duration-300 ease-out">
                        @if(!item.expanded){
                        <svg-icon src="icons/heroicons/outline/plus.svg" svgClass="h-4 w-4"></svg-icon>
                        }@else {
                        <svg-icon src="icons/heroicons/outline/minus.svg" svgClass="h-4 w-4"></svg-icon>
                        }
                    </div>
                </button>
                }

                <!-- Tooltip -->
                @if(!menuService.showSideBar){
                <div class="z-1 fixed h-[36px]">
                    <span
                        class="z-1 bg-foreground text-background absolute w-auto min-w-max translate-y-[2px] scale-0 rounded-md p-2 text-xs font-bold shadow-md transition-all duration-300 ease-out group-hover:scale-100 ltr:origin-left ltr:translate-x-10 rtl:origin-right rtl:-translate-x-10">
                        {{ item.label }}
                    </span>
                </div>
                }
            </div>
            <!-- Submenu items -->
            <div class="overflow-hidden transition-all duration-500 ease-out">
                <app-sidebar-submenu [submenu]="item"></app-sidebar-submenu>
            </div>
        </li>
        }
    </ul>

    @if (menu.separator) {
    <div class="py-3">
        <hr class="border-border border-dashed" />
    </div>
    }
</div>
}